= Publishing images from GitHub Actions to a GitHub Release

This can be further automated, but this is how I made the v0.0.1 release.

1. Make a tag

```
git tag --sign <version> -m "Release <version>"
git push --tags
```

2. Download the artifacts for this tag:

```
 ./download-tagged-artifacts.sh <version>
````

3. Make a release

```
make-release.sh <version>
```

4. Upload release

```
./upload-release.sh v0.0.1
```

5. Download release artifacts and get their SHA-512 hashes

```
./download-release.sh v0.0.1
shasum -a 512 *.qcow2
```

6. Get Release URLs

```
gh api repos/nixos-lima/nixos-lima/releases/tags/v0.0.1 --jq '.assets[] | {name, url: .browser_download_url, digest}'
```

7. Update the Lima YAML template in nixos-lima/nixos-lima-config-sample

Use the URLs from step 6 and SHA-512s from step 5 to update `nixos.yaml` in `nixos-lima/nixos-lima-config-sample`


